# ğŸ¬ çŸ­å‰§åˆ¶ä½œå¹³å° (Short Drama Studio)

åŸºäºç«å±±å¼•æ“çš„ä¸€ç«™å¼ AI çŸ­å‰§åˆ¶ä½œå¹³å°ï¼Œæ”¯æŒä»ä¸»é¢˜/å‰§æœ¬åˆ°æˆå“è§†é¢‘çš„å…¨æµç¨‹è‡ªåŠ¨åŒ–åˆ¶ä½œã€‚
æœ¬å¹³å°å…¼å®¹ **Volcengine (å›½å†…ç‰ˆ)** å’Œ **BytePlus (å›½é™…ç‰ˆ)** åŒå¹³å°ã€‚

## âœ¨ åŠŸèƒ½ç‰¹ç‚¹

- **å¤šå¹³å°æ”¯æŒ**:
  - **Volcengine**: æ”¯æŒç«å±±å¼•æ“å›½å†…ç‰ˆæœåŠ¡ (Doubao-pro, CV ç­‰)ã€‚
  - **BytePlus**: æ”¯æŒ BytePlus å›½é™…ç‰ˆæœåŠ¡ï¼Œæ— ç¼åˆ‡æ¢ API Endpointã€‚
  - **é…ç½®çµæ´»**: æ”¯æŒåœ¨åŒä¸€å¥—ç³»ç»Ÿä¸­ä¸ºä¸åŒé¡¹ç›®æŒ‡å®šä¸åŒçš„åº•å±‚æœåŠ¡å¹³å°ã€‚
- **å…¨æµç¨‹è‡ªåŠ¨åŒ–**: 
  - **å‰§æœ¬åˆ›ä½œ**: æ”¯æŒä¸»é¢˜ä¸€é”®æ‰©å†™æˆ–ä¸Šä¼ ç°æœ‰å‰§æœ¬ï¼Œå¹¶æä¾›æ™ºèƒ½æ¶¦è‰²ä¼˜åŒ–åŠŸèƒ½ã€‚
  - **è§’è‰²/åœºæ™¯è®¾è®¡**: è‡ªåŠ¨æå–å‰§æœ¬ä¸­çš„è§’è‰²ä¸åœºæ™¯ï¼Œç”Ÿæˆè¯¦ç»†æè¿°ã€æç¤ºè¯åŠå®šå¦†ç…§/æ¦‚å¿µå›¾ï¼Œç¡®ä¿è§†è§‰ä¸€è‡´æ€§ã€‚
  - **åˆ†é•œè®¾è®¡**: å°†å‰§æœ¬è‡ªåŠ¨æ‹†è§£ä¸ºåŒ…å«ç”»é¢æè¿°ã€è¿é•œã€æ—ç™½çš„åˆ†é•œè„šæœ¬ã€‚
  - **æç¤ºè¯å·¥ç¨‹**: åŸºäºåˆ†é•œå†…å®¹ï¼Œç»“åˆè§’è‰²ä¸åœºæ™¯çš„è§†è§‰å‚è€ƒï¼Œè‡ªåŠ¨ç”Ÿæˆé«˜è´¨é‡çš„ç»˜ç”»ä¸è§†é¢‘æç¤ºè¯ã€‚
  - **è§†è§‰ç”Ÿæˆ**: 
    - **ç”»é¢ç”Ÿæˆ**: æ”¯æŒå¤šé£æ ¼æ–‡ç”Ÿå›¾ï¼Œæ‰¹é‡ç”Ÿæˆåˆ†é•œç”»é¢ã€‚
    - **è§†é¢‘ç”Ÿæˆ**: åŸºäºåˆ†é•œç”»é¢è¿›è¡Œå›¾ç”Ÿè§†é¢‘ï¼Œèµ‹äºˆç”»é¢åŠ¨æ€æ•ˆæœã€‚
  - **åæœŸåˆæˆ**: è‡ªåŠ¨å°†ç”Ÿæˆçš„è§†é¢‘ç‰‡æ®µæŒ‰é¡ºåºæ— ç¼æ‹¼æ¥ï¼Œè¾“å‡ºæœ€ç»ˆæˆå“ã€‚
- **çµæ´»çš„è¾“å…¥æ¨¡å¼**:
  - **ä¸»é¢˜åˆ›ä½œ**: ä»…éœ€è¾“å…¥ä¸€ä¸ªåˆ›æ„ä¸»é¢˜ï¼ŒAI è‡ªåŠ¨æ‰©å†™ä¸ºå®Œæ•´å‰§æœ¬ã€‚
  - **å‰§æœ¬æ¨¡å¼**: æ”¯æŒç›´æ¥ç²˜è´´æˆ–ä¸Šä¼ ç°æœ‰å‰§æœ¬æ–‡ä»¶ã€‚
- **å¯è§†åŒ–ç¼–è¾‘**:
  - Web ç•Œé¢æ“ä½œï¼Œå®æ—¶é¢„è§ˆç”Ÿæˆç»“æœã€‚
  - æ”¯æŒå¯¹ä»»æ„åˆ†é•œã€è§’è‰²ã€åœºæ™¯çš„æ–‡æ¡ˆã€å›¾ç‰‡ã€è§†é¢‘è¿›è¡Œå•ç‹¬ç¼–è¾‘å’Œé‡æ–°ç”Ÿæˆã€‚
- **é¡¹ç›®ç®¡ç†**:
  - **é«˜çº§è¿‡æ»¤**: æ”¯æŒæŒ‰çŠ¶æ€ã€å¹³å°ã€ç±»å‹ç­‰å¤šç»´åº¦ç­›é€‰å’Œæœç´¢é¡¹ç›®ã€‚
  - **å¤§å±æ¨¡å¼**: æ²‰æµ¸å¼é¡¹ç›®ç®¡ç†ä½“éªŒã€‚
- **èµ„æºç®¡ç†**:
  - æ”¯æŒé›†æˆ TOS (å¯¹è±¡å­˜å‚¨) æ‰˜ç®¡ç”Ÿæˆèµ„æºã€‚
  - æ”¯æŒæœ¬åœ°å­˜å‚¨ä¸äº‘ç«¯å­˜å‚¨æ— ç¼åˆ‡æ¢ã€‚
  - è‡ªåŠ¨ç»Ÿè®¡é¡¹ç›® Token æ¶ˆè€—ä¸ç”Ÿæˆæ—¶é•¿ã€‚

## ğŸ“‹ ç³»ç»Ÿè¦æ±‚

- **Python**: 3.10+ (æ¨è 3.12)
- **æ•°æ®åº“**: SQLite (é»˜è®¤) æˆ– PostgreSQL (æ¨èç”Ÿäº§ç¯å¢ƒ)
- **ç¼“å­˜**: Redis (å¯é€‰ï¼Œç”¨äºä»»åŠ¡é˜Ÿåˆ—å’Œç¼“å­˜)
- **ä¾èµ–æœåŠ¡**:
  - ç«å±±å¼•æ“ (Volcengine) æˆ– BytePlus è´¦å·åŠ API å¯†é’¥ (Ark, CV, TOS)
  - FFmpeg (å¿…é¡»ï¼Œç”¨äºè§†é¢‘æ‹¼æ¥)

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. ç¯å¢ƒå‡†å¤‡

```bash
# å…‹éš†é¡¹ç›®
git clone https://github.com/your-repo/short-drama-studio.git
cd short-drama-studio

# åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ
python3 -m venv .venv
source .venv/bin/activate  # macOS/Linux
# .venv\Scripts\activate   # Windows

# å®‰è£…ä¾èµ–
pip install -r requirements.txt
```

### 2. é…ç½®æ–‡ä»¶

é¡¹ç›®æä¾›äº†é…ç½®æ–‡ä»¶æ¨¡æ¿ `config/config.yaml`ã€‚
åœ¨ä½¿ç”¨å‰ï¼Œ**å¿…é¡»**ä¿®æ”¹è¯¥æ–‡ä»¶ï¼Œå¡«å…¥æ‚¨çš„ API å¯†é’¥å’Œé…ç½®ä¿¡æ¯ã€‚

**æ ¸å¿ƒé…ç½®é¡¹**ï¼š
- **Ark API Key**: ç”¨äºè°ƒç”¨å¤§è¯­è¨€æ¨¡å‹ (Doubao-pro ç­‰)ã€‚
- **Access Key / Secret Key**: ç”¨äºè°ƒç”¨å›¾åƒ/è§†é¢‘ç”ŸæˆæœåŠ¡åŠ TOSã€‚
- **Platform**: æŒ‡å®šé»˜è®¤å¹³å° (`volcengine` æˆ– `byteplus`)ã€‚
- **Database**: é»˜è®¤ä½¿ç”¨ SQLiteï¼Œå¯ä¿®æ”¹ `database.url` åˆ‡æ¢è‡³ PostgreSQLã€‚

### 3. æç¤ºè¯é…ç½® (å¯é€‰)

é¡¹ç›®æ”¯æŒè‡ªå®šä¹‰å„ä¸ªç¯èŠ‚çš„ AI æç¤ºè¯ï¼ˆSystem Promptsï¼‰ï¼Œé…ç½®æ–‡ä»¶ä½äº `config/prompts.yaml`ã€‚
æ‚¨å¯ä»¥æ ¹æ®éœ€è¦è°ƒæ•´å„é˜¶æ®µçš„ `system` æç¤ºè¯æˆ– `user_template` æ¨¡æ¿ï¼Œä»¥æ§åˆ¶ç”Ÿæˆå†…å®¹çš„é£æ ¼å’Œè´¨é‡ã€‚

**æ”¯æŒé…ç½®çš„æ¨¡å—**ï¼š
- **script_generation**: å‰§æœ¬ç”Ÿæˆ
- **character_design**: è§’è‰²æå–ä¸è®¾è®¡
- **scene_design**: åœºæ™¯æå–ä¸è®¾è®¡
- **storyboard_generation**: åˆ†é•œè„šæœ¬ç”Ÿæˆ
- **image_prompt_generation**: ç”»é¢ç»˜å›¾æç¤ºè¯ç”Ÿæˆ
- **video_prompt_generation**: è§†é¢‘ç”Ÿæˆæç¤ºè¯ç”Ÿæˆ

### 4. å¯åŠ¨æœåŠ¡

```bash
python run.py
```

æœåŠ¡å¯åŠ¨åï¼Œè¯·åœ¨æµè§ˆå™¨è®¿é—®: `http://localhost:8080`

## ğŸ³ Docker éƒ¨ç½² (æ¨è)

é¡¹ç›®æä¾›äº†å®Œæ•´çš„ Docker Compose é…ç½®ï¼ŒåŒ…å«åº”ç”¨æœåŠ¡ã€Nginx åå‘ä»£ç†ã€PostgreSQL å’Œ Redisã€‚

### 1. ä¸€é”®å¯åŠ¨

ç¡®ä¿å·²å®‰è£… Docker å’Œ Docker Composeã€‚

```bash
# æ„å»ºå¹¶å¯åŠ¨æœåŠ¡ (åå°è¿è¡Œ)
docker-compose up -d --build

# æŸ¥çœ‹æ—¥å¿—
docker-compose logs -f app
```

### 2. è®¿é—®æœåŠ¡

å¯åŠ¨æˆåŠŸåï¼Œè®¿é—®: `http://localhost:8080`

| éƒ¨ç½²æ–¹å¼ | è®¿é—®åœ°å€ | è¯´æ˜ |
|---------|---------|------|
| æœ¬åœ°è¿è¡Œ | `http://localhost:8080` | ç›´æ¥è®¿é—® Python åç«¯ |
| Docker éƒ¨ç½² | `http://localhost:8080` | Nginx ä»£ç†ï¼Œåç«¯è¿è¡Œåœ¨å®¹å™¨å†…éƒ¨ 8000 ç«¯å£ |

> **æ³¨æ„**: å¦‚æœæœ¬åœ°æœ‰å…¶ä»– nginx è¿›ç¨‹å ç”¨ 8080 ç«¯å£ï¼Œè¯·å…ˆåœæ­¢è¯¥è¿›ç¨‹ï¼Œå¦åˆ™ä¼šå¯¼è‡´è®¿é—®åˆ°é”™è¯¯çš„é¡µé¢ã€‚

### 3. æ•°æ®åº“åˆ‡æ¢

Docker Compose é»˜è®¤å¯åŠ¨äº† Postgres å’Œ Redis æœåŠ¡ã€‚è¦è®©åº”ç”¨ä½¿ç”¨å®ƒä»¬ï¼Œè¯·ä¿®æ”¹ `config/config.yaml` æˆ–è®¾ç½®ç¯å¢ƒå˜é‡ï¼š

```yaml
# config/config.yaml
database:
  url: "postgresql://user:password@postgres:5432/short_drama"
redis:
  url: "redis://redis:6379/0"
```

## ğŸ› ï¸ æŠ€æœ¯æ ˆ

- **åç«¯**: Python 3.12, Aiohttp (Async Web Framework)
- **æ•°æ®åº“**: SQLAlchemy (ORM), SQLite / PostgreSQL
- **ç¼“å­˜/é˜Ÿåˆ—**: Redis
- **å‰ç«¯**: HTML5, Tailwind CSS, Vanilla JS
- **AI èƒ½åŠ›**: ç«å±±å¼•æ“ (Volcengine) / BytePlus SDK (Ark, CV)
- **åª’ä½“å¤„ç†**: MoviePy, FFmpeg

## ğŸ“„ è®¸å¯è¯

MIT License
